
@base: #445;

content {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: flex;
	color: #333;

	i[class^="icon-"] {
		display: inline-block;
		width: 17px;
		height: 17px;
		background-size: cover;
		background-repeat: no-repeat;
		background-position: 50% 50%;
		filter: invert() brightness(85%);

		&.icon-search { background-image: url(~/icons/icon-search.png); }
	}

	.anim-typing {
		position: relative;
		display: inline-block;
		width: 27px;
		height: 11px;

		&.tiny {
			top: 2px;
			transform: scale(.65);
		}

		b {
			background: #999;
			display: inline-block;
			position: absolute;
			top: 8px;
			width: 4px;
			height: 4px;
			border-radius: 50%;
			animation: wave 1600ms infinite ease-in-out;

			&:nth-child(1) {
				left: 3px;
			}

			&:nth-child(2) {
				left: 11px;
				animation-delay: 140ms;
			}

			&:nth-child(3) {
				left: 19px;
				animation-delay: 280ms;
			}
		}
	}

	.teams {
		background: darken(@base, 7%);
		color: #fff;
		width: 60px;
		padding-top: 7px;
		text-align: center;

		.team {
			background: darken(@base, 2%);
			color: lighten(@base, 17%);
			position: relative;
			display: inline-block;
			width: 42px;
			height: 42px;
			border-radius: 50%;
			margin-bottom: 7px;

			&:before {
				content: attr(data-name);
				position: absolute;
				top: 50%;
				left: 0;
				width: 100%;
				transform: translateY(-50%);
				font-size: 17px;
				font-weight: 700;
			}
		}
	}

	.contacts {
		background: @base;
		color: #fff;
		display: flex;
		flex-direction: column;
		width: 220px;

		.contacts-head {
			position: relative;
			height: 42px;
			padding: 8px 9px 0;
			border-bottom: 1px solid lighten(@base, 5%);

			.icon-search {
				position: absolute;
				top: 13px;
				left: 17px;
				width: 15px;
				height: 15px;
				filter: invert(100%) brightness(100%) opacity(50%);
			}

			input {
				background: lighten(@base, 7%);
				color: inherit;
				height: auto;
				padding: 5px 11px 5px 29px;
				border: 0;
				border-radius: 30px;

				&::-webkit-input-placeholder {
					color: lighten(@base, 23%);
					font-size: 12px;
				}
			}
		}

		.contacts-list {
			flex: 1;
			padding: 7px 9px;

			.contact {
				display: flex;
				padding: 3px 0;
				color: lighten(@base, 53%);

				&:hover {
					color: lighten(@base, 67%);
				}

				.avatar {
					background-color: lighten(@base, 11%);
					position: relative;
					display: inline-block;
					margin: 0 7px 5px 0;
					width: 34px;
					border-radius: 50%;

					&:before {
						content: attr(data-name);
						position: absolute;
						top: 50%;
						left: 0;
						width: 100%;
						z-index: 1;
						transform: translateY(-50%);
						font-size: 17px;
						font-weight: 700;
						text-align: center;
						color: lighten(@base, 31%);
					}

					&:after {
						content: "";
						position: relative;
						z-index: 2;
						display: block;
						padding-top: 100%;
						border-radius: inherit;
						background-image: inherit;
						background-position: 50% 50%;
						background-size: 100% auto;
						background-repeat: no-repeat;
					}
				}

				.info {
					flex: 1;

					.name {
						padding: 3px 0 3px;
						font-size: 13px;
						font-weight: 500;
					}

					.last-message {
						opacity: 0.7;
						width: 124px;
						white-space: nowrap;
						overflow: hidden;
						text-overflow: ellipsis;
					}
				}

				.details {
					width: 37px;
				}
			}
		}
	}

	.transcript {
		background: #f2f2f2;
		flex: 1;
		display: flex;
		flex-direction: column;

		.output-head {
			position: relative;
			height: 42px;
			border-bottom: 1px solid #ddd;
		}

		.output-body {
			flex: 1;
			padding: 3px 3px;
			overflow-x: hidden;
			overflow-y: auto;

			> divÂ {
				position: relative;
				border-radius: 13px;
				font-size: 13px;
				line-height: 1.35;
				padding: 5px 11px;
				max-width: 79%;
				margin: 5px 5px;
				clear: both;

				&:after {
					content: "";
				    position: absolute;
				    bottom: 0px;
				    width: 16px;
				    height: 9px;
				}

				&:first-child {
					margin-top: 0;
				}

				&.sent {
					background: #9c52b9;
					color: #fff;
					float: right;
					//filter: drop-shadow(0 1px 0 #ddd);

					&:after {
					    right: -9px;
					    background: radial-gradient(circle at top right, transparent 49%, #9c52b9 56%);
					    border-radius: 0 0 0 11px;
					}
				}

				&.received {
					background: #ccc;
					color: #222;
					float: left;
					margin-top: 13px;
					//filter: drop-shadow(0 1px 0 rgba(#9c52b9, .2));

					&:after {
					    left: -9px;
					    background: radial-gradient(circle at top left, transparent 49%, #ccc 56%);
					    border-radius: 0 0 11px 0;
					}

					&:before {
						content: attr(data-from);
						position: absolute;
						top: -16px;
						left: 5px;
						font-size: 11px;
						white-space: nowrap;
						color: #aaa;
					}

					& + .received {
						margin-top: 0px;

						&:before {
							display: none;
						}
					}
				}

				&.typing {
					position: relative;
					background: #ccc;
					color: #222;
					float: left;

					&:before,
					&:after {
						content: "";
						background: inherit;
					    position: absolute;
					    bottom: -2px;
					    left: 0;
						width: 11px;
						height: 11px;
						border-radius: 50%;
					}

					&:after {
						width: 4px;
						height: 4px;
						bottom: -3px;
						left: -3px;
					}
				}
			}
		}

		.input {
			height: 60px;
			border-top: 1px solid #ddd;
		}
	}

	.sidebar {
		background: #fff;
		display: flex;
		flex-direction: column;
		width: 200px;

		.sidebar-head {
			height: 42px;
			border-bottom: 1px solid #eee;
		}

		.sidebar-body {
			.profile {
				position: relative;
				padding: 13px 0;
				margin-bottom: 7px;
				text-align: center;
				border-bottom: 1px solid #eee;

				.avatar {
					background-color: #eee;
					background-position: 50% 50%;
					background-size: 100% auto;
					background-repeat: no-repeat;
					display: inline-block;
					margin-bottom: 5px;
					width: 67%;
					border-radius: 50%;

					&:before {
						content: "";
						display: block;
						padding-top: 100%;
					}
				}

				h2 {
					font-size: 16px;
				}
			}

			.field {
				display: flex;
				padding: 5px 13px;

				span {
					&:nth-child(1) {
						width: 40%;
						color: #888;
					}
					&:nth-child(2) {
						width: 60%;
						color: #222;
						text-align: right;
					}
				}
			}
		}
	}
}

@keyframes wave {
	0%, 40% { top: 8px; }
	20%     { top: 1px; }
}
